name: Lotto 6/45 Auto Buy

on:
  schedule:
    # Run every Saturday at 08:50 KST (Friday 23:50 UTC)
    # 50 23 * * 5
    - cron: '50 23 * * 5'
  workflow_dispatch: # Allows manual trigger from GitHub App

jobs:
  buy-lotto:
    runs-on: ubuntu-latest
    
    steps:
    - name: Checkout code
      uses: actions/checkout@v3

    - name: Set up Python
      uses: actions/setup-python@v4
      with:
        python-version: '3.9'

    - name: Install dependencies
      run: |
        python -m pip install --upgrade pip
        pip install selenium

    - name: Run Auto Purchase
      env:
        LOTTO_USER_ID: ${{ secrets.LOTTO_USER_ID }}
        LOTTO_USER_PW: ${{ secrets.LOTTO_USER_PW }}
        HEADLESS: true
      run: |
        python auto_purchase.py
